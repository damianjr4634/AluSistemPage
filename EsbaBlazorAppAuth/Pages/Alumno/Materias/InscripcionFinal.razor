@page "/alumno/materias/inscripcionexamen/{MateriaId}"

@inherits _BasePage
@using EsbaBlazorAppAuth.Data

<h2>Permiso de Examen</h2>

<span> <h4>@_nombreMateria </h4> </span>

<hr/>

<EditForm Model="@_permiso" OnValidSubmit="@HandleValidSubmit">
    <DataAnnotationsValidator />
    <div class="row sticky">
        <div class="btn-toolbar" role="toolbar" style="padding-left: 15px;" >
            <RadzenButton ButtonType="ButtonType.Submit" style="background-color: blue" Icon="save" BusyText="grabando ..." IsBusy=@busy Text="Guardar" />

        </div>
    </div>
    <hr/>
    <div class="row"> 
        <div class="col"> 
            <RadzenDataGrid @ref="mesasGrid" Data="@_mesas" TItem="MesaExamen" AllowColumnResize="false"
                            Width="600px">
                <Columns>   
                   
                    <RadzenDataGridColumn Width="90px" TItem="MesaExamen" Property="MateriaId" Title="Inscripcion" TextAlign="TextAlign.Center">
                        <Template Context="data">             
                           
                            @if(data.PermisoExamen == null && _mesaInscripto == null) {
                                <RadzenButton ButtonStyle="ButtonStyle.Secondary" style="" Click=@(() => AsignarMesa(data))>
                                    <span style="color:white;font-size:12px"><i class="fas fa-clipboard-check" style="margin-right:5px"/>Inscribirme</span>
                                </RadzenButton> 
                            }
                            else if(_mesaInscripto != null) { 
                                <span style="color:green;font-size:12px"><b>Inscripto</b></span>
                                <RadzenButton ButtonStyle="ButtonStyle.Danger" style="" Click=@(() => QuitarMesa(data))>
                                    <span style="color:white;font-size:12px"><i class="fas fa-trash-alt" style="margin-right:5px"></i>Quitar</span>
                                </RadzenButton> 
                            }                            
                        </Template>
                    </RadzenDataGridColumn>      
                                          
                   
                    <RadzenDataGridColumn Width="90px" TItem="MesaExamen" Property="Llamado" Title="Llamado"  />  
                    <RadzenDataGridColumn Width="90px" TItem="MesaExamen" Property="MesaId" Title="Mesa"/>  
                    <RadzenDataGridColumn Width="120px" TItem="MesaExamen" Property="FechaExamen" Title="Fecha">
                        <Template Context="data">             
                            @if (data.FechaExamen != null)  {
                                @data.FechaExamen.ToString("dd/MM/yyyy")
                            }
                        </Template>
                    </RadzenDataGridColumn>            
                </Columns>
            </RadzenDataGrid>
        </div>
    </div>

</EditForm>    