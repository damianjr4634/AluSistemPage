@page "/alumno/materias"

@inherits _BasePage

<div class="row"> 
    <div class="col"> 
        <span style="font-size:20px"><b>Materias de la carrera</b></span>
    </div>
</div>    
<div class="row"> 
    <div class="col">     
        <span style="font-size:20px"><b>@_carrera.Nombre</b></span>
    </div>
</div>
<hr/>
<div class="row"> 
    <div class="col"> 
        <RadzenDataGrid @ref="materiasGrid" Data="@_materiasCursadas" TItem="MateriaCursadaDto" AllowColumnResize="true"
                        CellRender="@CellRender" Width="600px">
            <Columns>   
                <RadzenDataGridColumn Width="50px" TItem="MateriaCursadaDto" Property="cuatrim" Title="Cuat" TextAlign="TextAlign.Center" />                            
                <RadzenDataGridColumn Width="90px" TItem="MateriaCursadaDto" Property="inscripcion" Title="Inscripcion" TextAlign="TextAlign.Center">
                    <Template Context="data">             
                        @if (data.inscripcion)  
                        {
                        <RadzenButton ButtonStyle="ButtonStyle.Secondary" style="width: 50px;height: 23px;padding-left: 15px;" Click=@(() => {_materiaFinal= data.codmat; _inscFinal=true;})>
                            @*Click=@(() => navigationManager.NavigateTo(@$"/alumno/materias/inscripcion/{data.codmat}") )>*@
                            
                            <span style="color:white;font-size:18px"><i class="fas fa-clipboard-check"></i></span>
                        </RadzenButton> 
                        }
                    </Template>
                </RadzenDataGridColumn>      
                <RadzenDataGridColumn Width="95px" TItem="MateriaCursadaDto" Property="permiso" Title="Permiso" TextAlign="TextAlign.Center">
                    <Template Context="data">             
                        @if (data.permiso)  
                        {
                        <RadzenButton ButtonStyle="ButtonStyle.Secondary" style="width: 50px;height: 23px;padding-left: 15px;"  Click=@(() => _inscFinal=true )>
                           @*Click=@(() => navigationManager.NavigateTo(@$"/alumno/materias/inscripcionexamen/{data.codmat}") )>*@
                            
                            <span style="color:white;font-size:18px"><i class="fas fa-book-open"></i></span>
                        </RadzenButton>                
                        }
                    </Template>
                </RadzenDataGridColumn>       
                <RadzenDataGridColumn TItem="MateriaCursadaDto" Property="descripci" Title="Materia" />          
                <RadzenDataGridColumn Width="125px" TItem="MateriaCursadaDto" Property="condicion" Title="Estado" >  
                    <Template Context="data">               
                        <span style="color:@data.htmlfontcolor;">@data.condicion</span>                
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn Width="90px" TItem="MateriaCursadaDto" Property="cuaanio" Title="Cuatri/AÃ±o"  />  
                <RadzenDataGridColumn Width="90px" TItem="MateriaCursadaDto" Property="nota" Title="Nota" TextAlign="TextAlign.Right" FormatString="{0:N}"/>  
                <RadzenDataGridColumn Width="120px" TItem="MateriaCursadaDto" Property="fecha" Title="Fecha">
                    <Template Context="data">             
                        @if (data.fecha != null)  {
                        @data.fecha.Value.ToString("dd/MM/yyyy")
                        }
                    </Template>
                </RadzenDataGridColumn>            
            </Columns>
        </RadzenDataGrid>
    </div>
</div>

<FormModal Visible=@_inscFinal OnClose=@(()=> {_materiaFinal="";_inscFinal=false; }) > 
    <InscripcionFinal MateriaId=@_materiaFinal/>
</FormModal> 
