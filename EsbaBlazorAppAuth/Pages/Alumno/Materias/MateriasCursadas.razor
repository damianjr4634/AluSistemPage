@page "/alumno/materias"

@inherits _BasePage

<div class="row"> 
    <div class="col"> 
        <span style="font-size:20px"><b>Materias de la carrera</b></span>
    </div>
</div>    
<div class="row"> 
    <div class="col">     
        <span style="font-size:20px"><b>@_carrera.Nombre</b></span>
    </div>
</div>
<hr/>
<div class="row"> 
    <div class="col"> 
        <RadzenDataGrid @ref="materiasGrid" Data="@_materiasCursadas" TItem="MateriaCursadaDto" AllowColumnResize="true"
                        CellRender="@CellRender" Width="600px">
            <Columns>   
                <RadzenDataGridColumn Width="50px" TItem="MateriaCursadaDto" Property="cuatrim" TextAlign="TextAlign.Center">
                    <HeaderTemplate>
                        <div style="text-align: center; width: 50px; margin-left: -12px;font-size:15px;">
                            <b>Cuat</b>
                        </div>
                    </HeaderTemplate>
                </RadzenDataGridColumn>                            
                <RadzenDataGridColumn Width="120px" TItem="MateriaCursadaDto" Property="inscripcion"  TextAlign="TextAlign.Center">
                    <HeaderTemplate>
                        <div style="text-align: center; width: 120px; margin-left: -12px;font-size:15px;">
                           <b>Inscripcion</b>
                        </div>
                    </HeaderTemplate>
                    <Template Context="data">             
                        @if (data.inscripcion)  
                        {                       
                            <button type="button" @onclick="@(() => {
                                _materiaInscripcion= data.codmat; 
                                _inscMateria=true;})" class="btn btn-info">
                                <i style="color:white;font-size:18px" class="fas fa-pen"></i>
                            </button>
                        }
                    </Template>
                </RadzenDataGridColumn>      
                <RadzenDataGridColumn Width="100px" TItem="MateriaCursadaDto" Property="permiso"  TextAlign="TextAlign.Center">
                    <HeaderTemplate>
                        <div style="text-align: center; width: 100px; margin-left: -12px;font-size:15px;">
                            <b>Permiso</b>
                        </div>
                    </HeaderTemplate>
                    <Template Context="data">             
                        @if (data.permiso)  
                        {                       
                            <button type="button" @onclick="@(() => {_materiaFinal= data.codmat; _inscFinal=true;})" class="btn btn-info">
                                <i style="color:white;font-size:18px" class="fas fa-pen"></i>
                            </button>                
                        }
                    </Template>
                </RadzenDataGridColumn>       
                <RadzenDataGridColumn TItem="MateriaCursadaDto" Property="descripci" >
                    <HeaderTemplate>
                        <div style="text-align: center; margin-left: 0px;font-size:15px;">
                            <b>Materia</b>
                        </div>
                    </HeaderTemplate>
                    <Template Context="data">               
                        <span style="font-size:15px">@data.descripci</span>                
                    </Template>
                </RadzenDataGridColumn>          
                <RadzenDataGridColumn Width="170px" TItem="MateriaCursadaDto" Property="condicion" TextAlign="TextAlign.Center">  
                    <HeaderTemplate>
                        <div style="text-align: center; width: 170px; margin-left: -12px;font-size:15px;">
                            <b>Estado</b>
                        </div>
                    </HeaderTemplate>
                    <Template Context="data">               
                        <span style="font-size:12px;color:@data.htmlfontcolor;"><b>@data.condicion</b></span>                
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn Width="100px" TItem="MateriaCursadaDto" Property="cuaanio" TextAlign="TextAlign.Center">
                     <HeaderTemplate>
                        <div style="text-align: center; width: 100px; margin-left: -12px;font-size:15px;">
                            <b>Cuatri<br>AÃ±o</b>
                        </div>
                    </HeaderTemplate>
                    <Template Context="data">               
                        <span style="font-size:15px;">@data.cuaanio</span>                
                    </Template>
                </RadzenDataGridColumn>  
                <RadzenDataGridColumn Width="80px" TItem="MateriaCursadaDto" Property="nota" TextAlign="TextAlign.Right" >
                    <HeaderTemplate>
                        <div style="text-align: center; width: 80px; margin-left: -12px;font-size:15px;">
                            <b>Nota</b>
                        </div>                       
                    </HeaderTemplate>
                    <Template Context="data">               
                        <span style="font-size:15px;"><b>@String.Format("{0:N2}",data.nota)</b></span>                
                    </Template>
                </RadzenDataGridColumn>  
                <RadzenDataGridColumn Width="100px" TItem="MateriaCursadaDto" Property="fecha">
                    <HeaderTemplate>
                        <div style="text-align: center; width: 100px; margin-left: -12px;font-size:15px;">
                            <b>Fecha</b>
                        </div>
                    </HeaderTemplate>
                    <Template Context="data">             
                        @if (data.fecha != null)  {
                            <span style="font-size:15px;"> @data.fecha.Value.ToString("dd/MM/yyyy")</span>
                        }
                    </Template>
                </RadzenDataGridColumn>            
            </Columns>
        </RadzenDataGrid>
    </div>
</div>


<FormModal Visible=_inscFinal OnClose=@InscripcionFinalClose > 
    <InscripcionFinal MateriaId=@_materiaFinal OnClose=@InscripcionFinalClose/>
</FormModal> 

<FormModal Visible=_inscMateria OnClose=@InscripcionMateriaClose > 
    <InscripcionMateria MateriaId=@_materiaInscripcion OnClose=@InscripcionMateriaClose/>
</FormModal> 